<!DOCTYPE html>
<html>
   
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ぶんしょかくん</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css">

    <%= stylesheet_link_tag  'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script defer src="https://use.fontawesome.com/releases/v5.7.2/js/all.js"></script>
  </head>

  <body>
      
    <%= render 'layouts/navbar' %>
   
 <div class="jumbotron">
    <div class="container">
      <%= render 'layouts/flash_messages' %>

      <%= yield %>
   
 

    <script>
     const execCopy = (string) => {
       // 空div 生成
       var tmp = document.createElement("div");
       // 選択用のタグ生成
       var pre = document.createElement('pre');

       // 親要素のCSSで user-select: none だとコピーできないので書き換える
       pre.style.webkitUserSelect = 'auto';
       pre.style.userSelect = 'auto';

       tmp.appendChild(pre).textContent = string;

       // 要素を画面外へ
       var s = tmp.style;
       s.position = 'fixed';
       s.right = '200%';

       // body に追加
       document.body.appendChild(tmp);
       // 要素を選択
       document.getSelection().selectAllChildren(tmp);

       // クリップボードにコピー
       var result = document.execCommand("copy");

       // 要素削除
       document.body.removeChild(tmp);

       return result;
     };

     const documentContent = document.getElementById('document_content');
     const documentContentButton = document.getElementById('document_content_button');

     documentContentButton.onclick = () => {
       if(execCopy(documentContent.value)){
         alert('コピーできました');
       }
       else {
         alert('このブラウザでは対応していません');
       }
     };

    </script>
     </div>
  </body>
  </div>
</html>
